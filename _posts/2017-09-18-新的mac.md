> 到手一台新mac, 是很让人开心的事. 借助icloud和timemachine, 我们可以做几乎所有事, 几乎....



### 还是有些内容需要手工弄的

1. dictionary, 这个必须手工copy出来, 位置: ~/Library/Dictionaries
2. mail和账号设置, 这个不能同步, 神奇了. 同样还有mail的其他一堆设置, 比如邮件规则啥的.
3. ibook, 这个我也不知道是apple真的没做好, 还是打墙的原因, 总之要手工搞.
4. itunes中的语音备忘录, 这个快疯了, 怎么可能不好呢?
5. 照片流, 这个买块硬盘吧. 不备份, apple就删除了, 貌似目前没有这个问题了. 
6. 手机铃声, 辛苦剪辑的铃声文件, 不保存就没了.
7. 列到这里, 我们见证了一个奇迹, icloud和timemachine不支持的, 竟然都是苹果自家的服务.

### 既然这样

估么着, 苹果不支持自家的icloud和timemachine, 等看到了, 我就列出来吧.



### 还有更多问题

> sierra有更多问题出现.

### 鼠标右键fetching

```sh
/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister -kill -seed -r -f -v -domain local -domain user -domain system
#运行这个之后, fetching还在, 不过一闪而过, 但是, 这句话本身, 会报一大堆错误.

```

也有人这么反馈

> I noticed this when I have a Time Machine disk attached that has not been used in a while. If the disk is asleep and I right-click, I see "Fetching" in the contextual menu. Then I hear the HDD wake up, spin for a second, and the "Open With" menu is finally populated.
>
> When I don't have the external drive attached, I don't see this behavior.

还有一个做法, 用safe mode, 也就是开机按住⇧ 

### 文件夹权限fetching

macOS Sierra: Use external storage devices

macos sierra  external disk drive attached permissions fetching



从这个问题得到了答案: Batch change permissions on an external HD

> https://discussions.apple.com/thread/7809442?start=0&tstart=0
> 同一个作者的另一个同样的问题, 因为姿势不对, 没有得到答案: "Don't have permissions" to view my backup files!



解决方案: 

> Select the external drive itself and do a get info.  At the very bottom there should be a little check box titled "Ignore ownership on this volume".  Make sure it is checked and you should gain full access.

但是, 实际上我是从那个齿轮点的 applying privileges to whole disk, 然后就失败了.

正解在这里:

> You can't ignore ownership on a backup volume. Also, you should not be using the volume for anything other than Time Machine backups.

既然如此, 问题来了, 

### 如何清除一个磁盘上面的timemachine备份

1. 第一反应就是删了就好.
2. 是的, 删除很简单, 但是, 他并不释放磁盘.
3. 那么废纸篓清空,
4. 是的, 清空同样简单, 但是, 他永远也不运行, 一直在计算.
   - 其实, 他确实运行了, 不过要很久.
   - 然后, 还不执行, 还会问你, 是清除所有, 还是只清除哪些不带锁的.

### 502 是啥?

```sh
ls -laed@ /Volumes/transcend/macback20170315/back 
drwxr-xr-x  6 502  staff  204 Jan 16  2017 /Volumes/transcend/macback20170315/back

```

### 如果不是timemachine目录

```sh
# info里面底部齿轮, apply to all content.
diskutil resetUserPermissions / `id -u`
#如果terminal显示设置失败, 执行下面这句, 之后再执行上面那句
chflags -R nouchg ~
```

### 结案陈词

1. 用了timemachine就别用来存文件了.
2. timemachine上面还有app, 这个导致了鼠标右键open fetching.
3. 总之, timemachine很久没更新了, 一堆问题.