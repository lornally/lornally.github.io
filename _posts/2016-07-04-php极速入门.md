> 正确源自错误, 失败是成功她妈, 先来个错误的: i=100; echo "xxx"+i; 

### 语法

1. php声明变量需要$开头, 常量不需要. 因此:

   ```php
   $i=100;
   define("FOO",     "something"); // 这是一个正常的常量, 不在类范围内的.
   #变量有3个关键函数
   unset($i); # 释放这个变量
   isset($i); # 检查这个变量是否设置了
   empty($i); # 检查这个变量是否为空
   ```

2. php的字符串链接用点 __.__ , 因此: 

   ```php
   echo "xxx".i //如果这样写这个是一个常数才行.
   echo "xxx".$i //这样写就对了. 这样就是一个变量了.
   ```


### 这货竟然是functional的.


1. 可变变量. 

   ```php
   $hello='hello world';
   $b='hello';
   echo $$b; // 此处显示hello world.
   ${$a[1]}; // 数组有歧义, 因此必须大括号使用.
   ${$a}[1];
   ```

   ​

2. 可变函数.

   ```php
   function foo() {
       echo "In foo()<br />\n";
   }
   $c = 'foo';
   $c();        // This calls foo()
   class Foo
   {
       function Variable()
       {
           $name = 'Bar';
           $this->$name(); // This calls the Bar() method
       }

       function Bar()
       {
           echo "This is Bar";
       }
   }

   $o = new Foo();
   $funcname = "Variable";
   $o->$funcname();   // This calls $foo->Variable()
   ```

   ​

3. 万物皆有值. 没写↩︎的函数返回的是null.

4. 闭包(匿名函数).

   ```php
   $greet = function($name)
   {
       printf("Hello %s\r\n", $name);
   };

   $greet('World');
   $greet('PHP');
   ```

   ​

5. 支持递归, 因此, 我们可以设计迭代函数.

6. 函数的参数可以传引用, 这样参数就会在函数中进行修改. 比如&$i 

   ```php
   $greet = function(&$name) //这个引用传的没啥意思.
   {
       printf("Hello %s\r\n", $name);
   };

   $greet('World');
   $greet('PHP');
   ```

   ​

OO

1. 水平组合

   ```php
   trait ezcReflectionReturnInfo {
       function getReturnType() { /*1*/ }
       function getReturnDescription() { /*2*/ }
   }

   class ezcReflectionMethod extends ReflectionMethod {
       use ezcReflectionReturnInfo;
       /* ... */
   }

   class ezcReflectionFunction extends ReflectionFunction {
       use ezcReflectionReturnInfo;
       /* ... */
   }
   ```

2. 静态和常量 const和static, __->__ 和 __::__ 

   ```php
   // 在类的成员方法里面，可以用 ->（对象运算符）：$this->property（其中 property 是该属性名）这种方式来访问非静态属性。静态属性则是用 ::（双冒号）：self::$property 来访问。
   define("FOO",     "something"); // 这是一个正常的常量, 不在类范围内的.
   class MyClass
   {
       const constant = 'constant value'; // 这个是常量, 注意它并没有使用$声明
     public static $my_static = 'foo'; // 这个是静态的

       function showConstant() {
           echo  self::constant . "\n";
       }
         public static function aStaticMethod() {
           // ...
       }

   }
   print MyClass::$my_static . "\n"; // 这个是访问静态属性的方法, 用类名直接访问.
   MyClass::aStaticMethod(); // 访问静态方法
   echo MyClass::constant . "\n"; // 常量
   $classname = "MyClass";
   echo $classname::constant . "\n"; // 自 5.3.0 起, 常量访问.
   $classname::aStaticMethod(); // 自 PHP 5.3.0 起, 静态方法.

   $class = new MyClass();
   $class->showConstant(); // 正常的类方法.
   echo $class::constant."\n"; // 自 PHP 5.3.0 起, 常量.
   ```


### 数组array, 变量要加$

1. 竟然有三种赋值方法

   ```php
   // 前面这三种可能会引起问题, 如果这个变量曾经定义过的话.
   // 因为string 中的字符可以通过一个从 0 开始的下标，用类似 array 结构中的方括号包含对应的数字来访问和修改，比如 $str[42]。可以把 string 当成字符组成的 array

   // 第一种, 直接赋值.
   $xxx[]="hhh";
   $xxx[]="hhhh";
   $xxx[]="hhhhh";

   // 第二种, 直接赋值, 并且指定索引下标
   $xx[0]="hhh";
   $xx[1]="hhhh";
   $xx[2]="hhhhh";

   // 或者创建一个关联数组, 
   $x['lh0']="hhh";
   $x['mh1']="hhhh";
   $x['hh2']="hhhhh";

   // 用array的唠叨丑陋模式
   $yxxx=array(
     'hhh',
     'hhhh',
     'hhhhh'
   );
   $xzxx=array(
    'lh'=> 'hhh',  // =>这么神奇的符号, 就这么一个作用哈. 
     'mh'=>'hhhh',
    'hh'=> 'hhhhh'
   );
   // 自 PHP 5.4 起 有了新的不唠叨格式, 貌似这个是最不唠叨格式.
   $arr= [
       "foo" => "bar",
       "bar" => "foo",
   ];
   ```

2. 关于赋值, 添加, 删除, 就比较有趣了.

   ```php
   // unset() 函数允许删除数组中的某个键。但要注意数组将不会重建索引。如果需要删除后重建索引，可以用 array_values() 函数。
   $arr = array(5 => 1, 12 => 2);

   $arr[] = 56;    // This is the same as $arr[13] = 56;
                   // at this point of the script

   $arr["x"] = 42; // This adds a new element to
                   // the array with key "x"
                   
   unset($arr[5]); // This removes the element from the array, 

   unset($arr);    // This deletes the whole array

   // 创建一个简单的数组
   $array = array(1, 2, 3, 4, 5);
   print_r($array);

   // 现在删除其中的所有元素，但保持数组本身不变:
   foreach ($array as $i => $value) {  // foreach 控制结构是专门用于数组的。它提供了一个简单的方法来遍历数组。
       unset($array[$i]);
   }
   print_r($array);

   // 添加一个单元（注意新的键名是 5，而不是你可能以为的 0）
   $array[] = 6;
   print_r($array);

   // 重新索引：
   $array = array_values($array);
   $array[] = 7;
   print_r($array);
   ```

3. 示例

   ```php
   // This:
   $a = array( 'color' => 'red',
               'taste' => 'sweet',
               'shape' => 'round',
               'name'  => 'apple',
               4        // key will be 0
             );

   $b = array('a', 'b', 'c');

   // . . .is completely equivalent with this:
   $a = array();
   $a['color'] = 'red';
   $a['taste'] = 'sweet';
   $a['shape'] = 'round';
   $a['name']  = 'apple';
   $a[]        = 4;        // key will be 0

   $b = array();
   $b[] = 'a';
   $b[] = 'b';
   $b[] = 'c';

   // After the above code is executed, $a will be the array
   // array('color' => 'red', 'taste' => 'sweet', 'shape' => 'round', 
   // 'name' => 'apple', 0 => 4), and $b will be the array 
   // array(0 => 'a', 1 => 'b', 2 => 'c'), or simply array('a', 'b', 'c').
   ```

4. 可以传引用

   ```php
   $arr1 = array(2, 3);
   $arr2 = $arr1;
   $arr2[] = 4; // $arr2 is changed,
                // $arr1 is still array(2, 3)
                
   $arr3 = &$arr1;
   $arr3[] = 4; // now $arr1 and $arr3 are the same
   ```


1. 数组的相关函数

   ```php
     $a; # 这是一个数组.
   foreach($a as $k=>$v){
     $k; # 就是数组中某一项的key
     $v; # 就是某一项的值.
   }
   count($a); # $a里面有多少项.
   each($a);  # 拿出一项, 指针向前移动一格.
   reset($a); # 指针回到开头.
   while(list($k, $v)=each($a)){ } # 赋值. 这个和foreach几乎一样啊.
   $_GET["name"]; # 拿到http get方法传递的name值.
   $_POST["name"]; # 和get类似, post方法.

   ```


### 系统函数

```php
<?php
//http://www.lampbrother.net
//兄弟连论坛
    $link = mysql_connect('localhost','root','123456')or die("连接数据库失败！");//连接数据库
    mysql_select_db('shoujiguishu')or die("选择数据库失败！");//选择数据库
    mysql_set_charset('utf8');//设置字符集编码
    $keyword = $_POST['keyword'];//得到用户提交的号码
    $num = substr($keyword,0,7);//把号码截取成7位和数据库匹配
    $sql = "SELECT num,quhao,city,type FROM shouji WHERE num = {$num}";//准备查询语句
    $res = mysql_query($sql);//发送语句
    if($res && mysql_num_rows($res)){//判断如果执行成功并且得到的结果数不为0
        $card = mysql_fetch_assoc($res);//把结果集给变量$card 一个索引数组
        $istrue = 1;//设置一个标志，用来判断是否查询成功
    }else{
        $msg = "请输入正确的手机号码！";//不成功，则返回一个提示信息
        $istrue = 0;//不成功，标志为0
    }
    
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>Index</title>
        <style>
            *{
                margin:0;
                padding:0;
            }
            .main{
                width:540px;
                margin:0 auto;
            }
            .top{
                width:540px;
                height:63px;
                background:url('./img/tit.png');
            }
            .tit{
                color:#026EA3;
http://www.lampbrother.net                font:normal bold 16px/63px serif;
                text-indent:10px;
            }
            .search{
                width:540px;
                
            }
            .search_text{
                width:260px;
                height:31px;
                margin-left:50px;
                margin-top:30px;
            }
            .bun_sub{
                width:80px;
                height:31px;
                background:url(./img/submit.gif);
                border:0;
            }
            .bun_res{
                width:80px;
                height:31px;
                background:url('./img/reset.gif');
                border:0;

            }
            .bun{
                width:170px;
                float:left;
                line-height:75px;
            }
            .sear{
                width:350px;
                float:left;
            }
            .content{
                float:left;
                width:538px;
                border-left:1px solid #A9C9D0;
                border-right:1px solid #A9C9D0;
                border-bottom:1px solid #A9C9D0;
            }
            .result{
                width:500px;
                margin:0 auto;
            }
            p{
                text-indent:30px;
                font:normal normal 16px/35px serif;
                color:#026EA3;
            }
        </style>
    </head>
    <body>
        <div class="main">
            <div class="top">
                <div class="tit">
                    手机归属地查询
                </div>
            </div>
            <div class="content">
                <div class="search">
                    <form action="" method="post">
                        <div class="sear"><input type="text" class="search_text" name="keyword" /></div>
                        <div class="bun"><input type="submit" class="bun_sub" name="sub" value="" />
                        <input type="reset" class="bun_res" name="reset" value="" /></div>
                    </form>    
                </div>
                <div class="result">
                <?php
                    if($istrue == 1){//判断标志为1时，说明查询成功，则执行下面代码
                ?>
                    <p>你查询的手机号码为:<?php echo $keyword ?></p>
                    <p>所属的诚实为：<?php echo $card['city'] ?></p>
                    <p>城市的区号为：<?php echo $card['quhao'] ?></p>
                    <p>卡的类型为：<?php echo $card['type'] ?></p>
                <?php
                    }else{//否则查询不到则执行下面代码
                        echo "<p>$msg</p>";
                    }
                ?>
                </div>
            </div>
        </div>
    </body>
</html>
```



### sdk

1. 是否使用sdk, 我也不知道, 可以试试phpstorm
2. 注册时选择License server，填http://idea.lanyus.com，然后点击OK，就注册了
3. 此方法是在IDEA15评论中看到的，试了一下PHPSTORM10，一样可用。

### 官网

php官网: http://php.net/manual/zh/internals2.memory.php

注册参考: http://www.oschina.net/news/67681/phpstorm-10

### curl

```php
<?php 
  // 把主页导出到文件.
$ch = curl_init("http://www.example.com/"); # 初始化
$fp = fopen("example_homepage.txt", "w");

curl_setopt($ch, CURLOPT_FILE, $fp); # 设置参数
curl_setopt($ch, CURLOPT_HEADER, 0);

curl_exec($ch); # 执行
curl_close($ch); # 关闭
fclose($fp);
?>
```

### 白屏为了啥

- 一般是语法错误.
- 比如缺了分号.
- php -l 虽然我不知道咋用.
- textmate和atom sublime应该都有对应的插件.

### 文件

- 打开文件之前, 查看一下文件是否可以打开, 这个其实是判断一下open是否返回false.
- php的io是阻塞的, 因此, 如果多个php任务, 最好使用多个不同的文件.

### php大神的blog

http://www.laruence.com/2008/11/20/630.html

