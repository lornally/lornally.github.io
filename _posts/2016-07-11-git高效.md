### git效率, 提升效率是一定的.

1. 密码要搞定, 不必每次都输入. https和ssh方式都可以. 

   - 复杂的ssh方式, …… 需要把本地的~/.ssh/id_rsa.pub copy到服务器 ~/.ssh/authorized_keys文件中. 注意, 不是覆盖, 是把本地这一句, 放到服务器里面, 单独占一行.
   - 简洁的https方式. 可以一句话搞定.

   ```sh
   #复杂的ssh方式
   pbcopy <~/.ssh/id_rsa.pub #ssh方式用这个, 把这个公钥复制到服务器.
   profile setting->ssh key->add ssh key.#github 可以把这个公钥放到个人profile(个人首页右上角)里面.
   ssh-copy-id git@server #这个命令就是干活的, 但是, 需要 openssh-client package. 
   cat ~/.ssh/id_rsa.pub | ssh <user>@<hostname> 'cat >> .ssh/authorized_keys && echo "Key copied"' #这句话直接就可以用.

   #简洁的https方式
   git config --global credential.helper cache #linux
   git config --global credential.helper osxkeychain #mac
   ```

   ​

2. 服务器自动部署.

   - 服务器建一个裸体库, 比如mse.git
   - 本地添加远程源, 记得要推送本地需要推送的分支上去.
   - 服务器设置钩子, 自动更新工作目录

   ```sh
   #进入刚刚建立的裸体库mse.git/hooks目录, 然后编辑post-receive
   cd /data/www/gitm/bareserver/mse.git/hooks
   cp post-receive.sample post-receive #把sample改为配置.
   vi  post-receive#添加最后一行: 
   GIT_WORK_TREE=/data/www/gitm/workd/ git checkout weixin -f
   ```

   ​

3. rebase, 分支推主线之前, 先弄这个. 不要在push到服务器之后弄这个.

   ```sh
   git rebase master # 把master当做当前分支的基础, 这样master和store就没有分叉的历史了, 看上去也比较清爽, 而且也比较符合实际的业务逻辑. 这样当你推向主线的时候, 主线的管理者不需要merge了.
   git pull #rebase 之后需要pull.
   git push #rebase之后, 先pull, 再push. 然后发现整个目录清净了.
   #注意, push服务器之后, 就不要搞这个了. 这是在push之前做的.
   ```

   ​

4. 合并commit, 本地一堆commit, push之前合并一下.

   ```sh
   git add . #反复做这两步操作.
   git commit --amend -m "no need indepandent" #反复这两步, 提交就都提交到了最后一个版本上面.
   git rebase -i HEAD~3 #修改最近3次提交, 注意push服务器之前做这个, push之后再做这个, 就不合适了.
   #也就是说, git status时, 至少ahead 主线一个commit, 才能做这个操作, 否则就引起分支, 合并, 以及重复提交, 真心很烦, 会导致提交时间线比不整理更复杂, 且两次重复的一样的提交, 令人费解. 
   ```



