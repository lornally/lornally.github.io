> 多年不用, 发现很生疏了.



###### 常用命令

```sh
$ docker container ls
$ docker container stop webserver
$ docker container ls -a
$ docker container rm webserver
$ docker image ls
$ docker image rm nginx
$ docker ps #=contianer ls
$ docker version
$ sysctl kern.hv_support #查看系统硬件支持, 支持显示: kern.hv_support:1
$ docker save -o images.tar image1 [image2 ...] 
$ docker export -o myContainner1.tar container1 
$ docker load -i images.tar 
$ docker import -i myContainer1.tar
$ env | grep DOCKER #查看toolbox环境是否存在, 没有输出代表不存在, 用的是docker desktop
```

###### 核心命令

```sh
$ docker pull #这个是不必要的, 可以直接run, docker会自动下载image 
$ docker container create #这个也不必要, 也是包含在run里面了
$ docker run -it alpine env #查看环境情况 //todo
$ docker run -i -t ubuntu /bin/bash  这个意思是 交互式interact(-i,), 在terminal(-t)直接操作, 使用bash. 此时, exit可以停止这个container
```

###### 基础概念

- image, 原始的镜像
- container, 镜像实际运行时, 就是一个container, 基于container的某个状态可以制造image, 这个对于测试真的很方便.
- docker toolbox是基于virtualbox的一套环境包含docker, docker-compose, docker-machine
- docker desktop包含docker docker-compose, 他使用了苹果提供的hyperkit替换了virtualbox, 并且不使用docker-machine
- 官网
  - 有张图片特别好: https://docs.docker.com/engine/images/engine-components-flow.png
  - 官网地址: https://docs.docker.com/engine/docker-overview/

###### 背后概念

> 基础概念的基础概念

- namespaces 举例说明:
  - **The `pid` namespace:** Process isolation (PID: Process ID).
  - **The `net` namespace:** Managing network interfaces (NET: Networking).
  - **The `ipc` namespace:** Managing access to IPC resources (IPC: InterProcess Communication).
  - **The `mnt` namespace:** Managing filesystem mount points (MNT: Mount).
  - **The `uts` namespace:** Isolating kernel and version identifiers. (UTS: Unix Timesharing System).
- control groups (cgroups) 控制应用使用的资源范围.
- union file systems (unionFS) 包括AUFS, btrfs, vfs 和 devicemapper
- container format, 目前用libcontainer, 未来会支持bsd jails和solaris zones

###### 整体思路

1. 本地开发的代码也形成一个image->container