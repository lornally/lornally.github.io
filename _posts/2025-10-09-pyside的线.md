### ä¸ä¼šè™šåŒ–çš„æ¸å˜çº¿

```py
import random
import sys

from PySide6.QtCore import Qt
from PySide6.QtGui import QColor, QLinearGradient, QPainter, QPainterPath
from PySide6.QtWidgets import QApplication, QGraphicsItem, QGraphicsPathItem, QGraphicsScene, QGraphicsView

app = QApplication(sys.argv)

scene = QGraphicsScene()
D_CON = 33
S_CON = 30

color10 = [
  "#FF6B6B",  # çŠç‘šçº¢
  "#4ECDC4",  # é’ç»¿è‰²
  "#FFEAA7",  # æš–é»„è‰²
  "#45B7D1",  # å¤©è“è‰²
  "#DDA0DD",  # æ¢…èŠ±è‰²
  "#98D8C8",  # è–„è·è“
  "#F7DC6F",  # é‡‘é»„è‰²
  "#96CEB4",  # è–„è·ç»¿
  "#BB8FCE",  # æ·¡ç´«è‰²
  "#85C1E9",  # æµ…è“è‰²
]


def hothue():
  c = color10
  return QColor(random.choice(c))


def topline(*, èµ·ç‚¹, ç»ˆç‚¹, å»¶é•¿x, isright=True):
  '''ç”»é¡¶å±‚çº¿'''
  èµ·ç‚¹x, èµ·ç‚¹y = èµ·ç‚¹
  ç»ˆç‚¹x, ç»ˆç‚¹y = ç»ˆç‚¹
  # è´å¡å°”æ›²çº¿è·¯å¾„, 2æ¡
  path1 = QPainterPath()
  path1.moveTo(èµ·ç‚¹x, èµ·ç‚¹y - 4)
  # æ§åˆ¶ç‚¹è®©æ›²çº¿è‡ªç„¶å¼¯æ›²
  æ§åˆ¶x1 = èµ·ç‚¹x + D_CON if isright else èµ·ç‚¹x - D_CON
  æ§åˆ¶x2 = ç»ˆç‚¹x - S_CON if isright else ç»ˆç‚¹x + S_CON
  path1.cubicTo(æ§åˆ¶x1, èµ·ç‚¹y - 4, æ§åˆ¶x2, ç»ˆç‚¹y, ç»ˆç‚¹x, ç»ˆç‚¹y)
  path1.lineTo(å»¶é•¿x, ç»ˆç‚¹y)

  path2 = QPainterPath()
  path2.moveTo(èµ·ç‚¹x, èµ·ç‚¹y + 4)
  path2.cubicTo(æ§åˆ¶x1, èµ·ç‚¹y + 4, æ§åˆ¶x2, ç»ˆç‚¹y + 1, ç»ˆç‚¹x, ç»ˆç‚¹y + 1)
  path2.lineTo(å»¶é•¿x, ç»ˆç‚¹y + 1)

  # åˆå¹¶ä¸ºé—­åˆåŒºåŸŸ
  combined_path = QPainterPath()
  combined_path.addPath(path1)
  combined_path.connectPath(path2.toReversed())
  combined_path.closeSubpath()

  return combined_path


def getgrad(*, did, color):
  # åˆ›å»ºæ¸å˜
  grad = QLinearGradient()
  # è®¾ç½®ç›¸å¯¹åæ ‡æ¨¡å¼
  grad.setCoordinateMode(QLinearGradient.CoordinateMode.ObjectMode)
  # ä½¿ç”¨ç›¸å¯¹åæ ‡ (0,0) åˆ° (1,0) è¡¨ç¤ºä»å·¦åˆ°å³
  if did == "right":
    grad.setStart(0.0, 0.5)  # å·¦è¾¹ä¸­ç‚¹
    grad.setFinalStop(1.0, 0.5)  # å³è¾¹ä¸­ç‚¹
  else:
    grad.setStart(1.0, 0.5)  # å³è¾¹ä¸­ç‚¹
    grad.setFinalStop(0.0, 0.5)  # å·¦è¾¹ä¸­ç‚¹
  grad.setColorAt(0, QColor("gray"))
  grad.setColorAt(1, color)
  return grad


èµ·ç‚¹x, èµ·ç‚¹y = 0, 0
ç»ˆç‚¹x, ç»ˆç‚¹y = 60, 1500
å»¶é•¿x = 150
isright = True
line = QGraphicsPathItem()
line.setZValue(-1)
line.setFlag(QGraphicsItem.GraphicsItemFlag.ItemUsesExtendedStyleOption, True)
line.setFlag(QGraphicsItem.GraphicsItemFlag.ItemClipsToShape, False)
line.setFlag(QGraphicsItem.GraphicsItemFlag.ItemClipsChildrenToShape, False)
line.setPen(Qt.PenStyle.NoPen)  # ä¸»èŠ‚ç‚¹çº¿ä¸æ˜¾ç¤ºè¾¹æ¡†


combined_path = topline(èµ·ç‚¹=(èµ·ç‚¹x, èµ·ç‚¹y), ç»ˆç‚¹=(ç»ˆç‚¹x, ç»ˆç‚¹y), å»¶é•¿x=å»¶é•¿x, isright=isright)
line.setPath(combined_path)
clr = hothue()
grad = getgrad(color=clr, did='right')
line.setBrush(grad)


scene.addItem(line)

view = QGraphicsView(scene)
view.setRenderHint(QPainter.RenderHint.Antialiasing, True)
view.setWindowTitle('EllipseItem ç‚¹æˆ‘è¯•è¯•')
view.setDragMode(QGraphicsView.DragMode.ScrollHandDrag)
view.centerOn(0, 0)
view.setFocusPolicy(Qt.FocusPolicy.ClickFocus)
# view.resize(600, 600)
view.showMaximized()
sys.exit(app.exec())

```

### è§£é‡Š

---

### ğŸ“š å¸¸ç”¨ `GraphicsItemFlag` é€ŸæŸ¥è¡¨

| æ ‡å¿—                                   | ä½œç”¨                                                         |
| -------------------------------------- | ------------------------------------------------------------ |
| `ItemIsMovable`                        | å¯ä»¥ç”¨é¼ æ ‡æ‹–åŠ¨ã€‚                                             |
| `ItemIsSelectable`                     | å¯ä»¥é€‰ä¸­ï¼ˆå‡ºç°è™šçº¿æ¡†ï¼Œè§¦å‘ `itemSelectionChanged`ï¼‰ã€‚        |
| `ItemIsFocusable`                      | èƒ½æ¥å—é”®ç›˜ç„¦ç‚¹ï¼ˆ`setFocus()` / é”®å…¥äº‹ä»¶ï¼‰ã€‚                  |
| `ItemIgnoresTransformations`           | é¡¹ä¿æŒåŸå§‹å¤§å°ï¼Œä¸å—è§†å›¾ç¼©æ”¾/æ—‹è½¬å½±å“ï¼ˆé€‚åˆåšå›ºå®šå°ºå¯¸çš„æ–‡å­—æ ‡ç­¾ï¼‰ã€‚ |
| `ItemContainsChildrenInShape`          | æŠŠå­å­™å…¨éƒ¨ç®—è¿›è‡ªå·±çš„ `shape()`ï¼Œç”¨äºç¢°æ’æ£€æµ‹ã€‚               |
| `ItemDoesntPropagateOpacityToChildren` | è‡ªèº«é€æ˜ä¸å½±å“å­é¡¹ã€‚                                         |
| `ItemNegativeZStacksBehindParent`      | è´Ÿ Z å€¼è‡ªåŠ¨æ’åœ¨çˆ¶é¡¹åé¢ï¼Œç”¨äºå›¾å±‚ç®¡ç†ã€‚                      |
| `ItemSendsGeometryChanges`             | ç§»åŠ¨/æ—‹è½¬æ—¶ä¼šå‘é€ `ItemPositionChange` ç­‰äº‹ä»¶ï¼Œå¯æ‹¦æˆªåšé™åˆ¶ã€‚ |
| `ItemSendsScenePositionChanges`        | åªè¦åœºæ™¯åæ ‡å˜å°±å‘äº‹ä»¶ï¼Œæ¯”ä¸Šé¢æ›´é¢‘ç¹ã€‚                       |
| `ItemUsesExtendedStyleOption`          | ç»™ `paint()` é€æ›´å¤šçŠ¶æ€ä¿¡æ¯ï¼Œå¯¹æœ¬æ¬¡æ— å½±å“ã€‚                  |
| `ItemClipsToShape`                     | å…³é—­å **ä¸å†ç®€åŒ–/è™šçº¿**ï¼Œå¤§è·¯å¾„ä¹Ÿèƒ½å®Œæ•´æ¸²æŸ“ã€‚               |
| `ItemClipsChildrenToShape`             | å…³é—­å **å­é¡¹ä¸ä¼šè¢«è£æ‰**ï¼Œç›®å‰æ— å­é¡¹ï¼Œé˜²æ‚£äºæœªç„¶ã€‚          |

---

### ğŸ¯ å®æˆ˜
- åªæƒ³ **ç”»å¤§æ¸å˜æ¡** â†’ è®°ä½ **å…³é—­ `ItemClipsToShape`** å³å¯è§£å†³â€œè™šçº¿â€é—®é¢˜ã€‚  
- æƒ³è®©ç”¨æˆ· **æ‹–/é€‰/ç¼©æ”¾** â†’ å†åŠ  `ItemIsMovable`ã€`ItemIsSelectable`ã€‚  
- åš **å›ºå®šå°ºå¯¸æ–‡å­—** â†’ åŠ  `ItemIgnoresTransformations`ã€‚  

### è¾¹æ¡†(å½¢çŠ¶çš„æè¾¹)

* è¿™ä¸ªè¾¹æ¡†çš„çº¿å½¢æ˜¯ä¸èƒ½ç›´æ¥åšæ¸å˜çš„

| å¸¸é‡             | æ•°å€¼ | é¢„è§ˆæ•ˆæœ             |
| ---------------- | ---- | -------------------- |
| `Qt.NoPen`       | 0    | ä¸æè¾¹, åªå‰©ä¸‹å¡«å……   |
| `Qt.SolidLine`   | 1    | å®çº¿                 |
| `Qt.DashLine`    | 2    | çŸ­è™šçº¿ â€‘ â€‘ â€‘         |
| `DotLine`        | 3    | ç‚¹çº¿ Â· Â· Â·           |
| `DashDotLine`    | 4    | ç‚¹åˆ’çº¿ â€‘ Â· â€‘ Â·       |
| `DashDotDotLine` | 5    | åŒç‚¹åˆ’çº¿ â€‘ Â· Â· â€‘ Â· Â· |

```py
line.setPen(Qt.GlobalColor.red)          # é»˜è®¤ 1 px å®çº¿çº¢
line.setPen(QPen(QColor("#4ECDC4"), 3))  # 3 px è‡ªå®šä¹‰é¢œè‰²å®çº¿
line.setPen(QPen(Qt.DashLine))           # é»‘è‰²è™šçº¿ï¼Œé»˜è®¤ 1 px

pen = QPen() # å®šåˆ¶ä¸€ä¸ªæè¾¹
pen.setStyle(Qt.DashDotDotLine)   # çº¿å‹
pen.setWidthF(2.5)                # çº¿å®½ï¼ˆæµ®ç‚¹ï¼‰
pen.setColor(QColor(255, 107, 107, 180))  # RGB + é€æ˜åº¦
pen.setCapStyle(Qt.RoundCap)      # ç«¯ç‚¹åœ†è§’
pen.setJoinStyle(Qt.RoundJoin)    # è½¬è§’åœ†è§’
line.setPen(pen)
```

