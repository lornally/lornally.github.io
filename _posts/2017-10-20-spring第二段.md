### 再一次安装

> 因为自己作死, 升级了high sierra, 然后, spotlights完蛋了. 导致重新安装macOS, 最后用了usb安装, 多次格式化硬盘, 强制降级到了sierra. 

```sh
#### 绝对不用sdkman了, 那个货真不靠谱, 使用brew:
brew tap pivotal/tap  #添加了一个搜索源.
brew tap #可以查看源列表.
brew install springboot
#### brew描述: zsh completions have been installed to:
#  /usr/local/share/zsh/site-functions
# 新开一个terminal, 一切正常的完美.
spring init --build=gradle #先执行这个. 拿到demo.zip
# 然后解压缩, 找到唯一的一个正常java(另外一个是test).
```

### 第一个spring

```groovy
//一个groovy, groovy很简洁啊.
@RestController
class HelloController {
  @RequestMapping("/")
  def hello() {
    return "Hello 哇嘎嘎嘎嘎"
  }
}
```



```java
//前面的都忽略, 不动他们.
@RestController  //加了这句, 实践证明这行必须要.
@EnableAutoConfiguration //加了这句, 实践证明这行可以删除.
public class DemoApplication {	
  @RequestMapping("/") //加了这句
	    String home() {
	        return "Hello World!";
	    }
//后面的也忽略, 不理他们.	
}
```

```sh
spring run demo
spring run demo #执行
open http://localhost:8080 #还是得到之前的报错.
spring run xxx.groovy #一样的报错, 顺便说一句, xxx.groovy或者xxx.java都没问题.
```

然后又想骂人, 竟然报错. 竟然报错. 坑死人啊.

```sh
报错一大坨:
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.codehaus.groovy.vmplugin.v7.Java7$1 (jar:file:/usr/local/Cellar/springboot/1.5.8.RELEASE/lib/spring-boot-cli-1.5.8.RELEASE.jar!/BOOT-INF/lib/groovy-2.4.12.jar!/) to constructor java.lang.invoke.MethodHandles$Lookup(java.lang.Class,int)
WARNING: Please consider reporting this to the maintainers of org.codehaus.groovy.vmplugin.v7.Java7$1
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
java.lang.reflect.InvocationTargetException
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	
google瞬间得到答案: jdk9兼容问题.
https://github.com/spring-projects/spring-boot/issues/10445
https://github.com/magarena/magarena/issues/1368

```

一切又绕回来了, 我们还是需要sdkman安装java.

```sh
curl -s "https://get.sdkman.io" | zsh  
### 这次不需要高complete了, 因为, 我们已经用brew安装了spring
### 等等, 我用brew 再次安装一下spring, 是不是就OK了? 试试吧.
brew reinstall springboot #失败了, 安装是好的, 但是, 依旧不能执行.
### 老实安装了sdkman, 但是新窗口也不行, 提示init没找到. 自己去看, 确实没有初始化的脚本.
rm -rf .sdkman    # 删除之后, 再次安装, sdk正常了.
### 我们继续搞java吧.
sdk install java 8u151-oracle #版本号要写全了.
sdk list java #可以用这个查看支持的版本号.
http://www.jenv.be #这是一个专门管理java环境的工具, 有需要可以用.
brew cask info java  # 这个能查看brew会安装的版本. 如何用brew安装老版本
brew cask install java6 #据说这样可以, 我试了, 不行.
brew cask install java@6 #据说这样可以, 我试了, 也不行.
```

